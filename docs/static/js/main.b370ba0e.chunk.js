(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{235:function(e,t,r){},236:function(e,t,r){"use strict";r.r(t);var s=r(27),a=r(28),c=r(0),i=r(16),n=r(1),l=r(98);const d=new class{constructor(){var e=this;this.type="",this.minTemperature="",this.maxTemperature="",this.isFiltered=!1,this.selectedDay={},this.getFilteredDays=Object(l.a)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const r=t.filter((t=>{const r=!e.type||e.type===t.type,s=!e.minTemperature||Number(e.minTemperature)<=Number(t.temperature),a=!e.maxTemperature||Number(e.maxTemperature)>=Number(t.temperature);return r&&s&&a}));return r})),Object(c.w)(this,{},{autoBind:!0})}applyFilter(e){e.type&&(this.type=e.type),e.minTemperature&&(this.minTemperature=e.minTemperature),e.maxTemperature&&(this.maxTemperature=e.maxTemperature),this.isFiltered=!0}setSelectedDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selectedDay=e}resetFilter(){this.maxTemperature="",this.minTemperature="",this.type="",this.isFiltered=!1}};var b=r(3);const u=Object(n.createContext)(d),o=e=>Object(b.jsx)(u.Provider,{value:d,children:e.children}),j=new a.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),m=()=>Object(n.useContext)(u);var p=r(99),h=r.n(p);const O=Object.freeze({async getWeather(){const{data:e}=await h.a.get("https://lab.lectrum.io/rtx/api/forecast");return e.data}}),y=()=>{const{data:e,isFetched:t}=Object(a.useQuery)({queryKey:["forecast"],queryFn:O.getWeather,onError:e=>{console.log(e)}});return{data:e,isFetched:t}},x=Object(i.a)((()=>{const{data:e=[]}=y(),{selectedDay:t}=m(),{id:r}=t||{},{temperature:s,rain_probability:a,humidity:c}=e.find((e=>e.id===r))||{};return r?Object(b.jsxs)("div",{className:"current-weather",children:[Object(b.jsx)("p",{className:"temperature",children:s}),Object(b.jsxs)("p",{className:"meta",children:[Object(b.jsxs)("span",{className:"rainy",children:["%",a]}),Object(b.jsxs)("span",{className:"humidity",children:["%",c]})]})]}):null}));var v=r(24),g=r(103),f=r(29),D=r.n(f);const T=e=>{let{label:t,register:r,error:s,selected:a,disabled:c,value:i}=e;return Object(b.jsxs)("label",{className:D()("checkbox",{selected:a}),children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"error-message",children:null===s||void 0===s?void 0:s.message}),t]}),Object(b.jsx)("input",{value:i,type:"radio",...r,disabled:c})]})},N=e=>{let{label:t,register:r,disabled:s}=e;return Object(b.jsxs)("p",{className:"custom-input",children:[Object(b.jsx)("label",{children:t}),Object(b.jsx)("input",{type:"number",...r,disabled:s})]})};var w=r(38);const F=w.a().shape({type:w.b().oneOf([null,"cloudy","sunny"]).nullable().notRequired(),minTemperature:w.b().notRequired(),maxTemperature:w.b().notRequired()}),q=Object(i.a)((()=>{const{isFiltered:e,resetFilter:t,applyFilter:r}=m(),{formState:s,watch:a,register:c,handleSubmit:i,reset:n}=Object(v.d)({mode:"onSubmit",resolver:Object(g.a)(F)}),l=a("type"),d=i((e=>{r(e)}));return Object(b.jsxs)("form",{className:"filter",onSubmit:d,children:[Object(b.jsxs)("fieldset",{disabled:e,children:[Object(b.jsx)(T,{dsiabled:e,label:"\u0425\u043c\u0430\u0440\u043d\u043e",error:s.errors.cloudy,register:c("type"),value:"cloudy",selected:"cloudy"===l}),Object(b.jsx)(T,{disabled:e,label:"\u0421\u043e\u043d\u044f\u0447\u043d\u043e",error:s.errors.sunny,register:c("type"),value:"sunny",selected:"sunny"===l}),Object(b.jsx)(N,{disabled:e,label:"\u041c\u0456\u043d\u0456\u043c\u0430\u043b\u044c\u043d\u0430 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430",register:c("minTemperature"),error:s.errors.minTemperature}),Object(b.jsx)(N,{disabled:e,label:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430",register:c("maxTemperature"),error:s.errors.maxTemperature})]}),e?Object(b.jsx)("button",{onClick:()=>{n(),t()},children:"\u0421\u043a\u0438\u043d\u0443\u0442\u0438"}):Object(b.jsx)("button",{disabled:!s.isDirty,type:"submit",children:"\u0412\u0456\u0434\u0444\u0456\u043b\u044c\u0442\u0440\u0443\u0432\u0430\u0442\u0438"})]})}));var R=r(239),C=r(240);const S=e=>e&&Object(R.a)(new Date(e),"eeee",{locale:C.a}),k=e=>{const t=Date.now();return e.filter((e=>{let{day:r}=e;return((e,t)=>{const r=new Date(e),s=new Date(t);return r.getDate()>=s.getDate()&&r.getMonth()>=s.getMonth()&&r.getFullYear()>=s.getFullYear()})(r,t)}))};var M=r(241);const E=Object(i.a)((e=>{let{day:t}=e;const{id:r,type:s,temperature:a,day:i}=t,n=S(i),l=(d=n).charAt(0).toUpperCase()+d.slice(1);var d;const{selectedDay:u,setSelectedDay:o}=m(),{id:j}=Object(c.D)(u)||{};return Object(b.jsxs)("div",{className:D()("day",{[s]:!0,selected:r===j}),onClick:()=>{o(t)},children:[Object(b.jsx)("p",{children:l}),Object(b.jsx)("span",{children:a})]})})),Q=Object(i.a)((()=>{const{getFilteredDays:e,setSelectedDay:t}=m(),{data:r=[],isFetched:s}=y(),a=e(r),c=k(a),i=(l=7,c.slice(0,l));var l;Object(n.useEffect)((()=>{t(i[0])}),[i]);const d=i.map((e=>Object(b.jsx)(E,{day:e},e.id)));return s?Object(b.jsx)("div",{className:"forecast",children:d.length?d:Object(b.jsx)("p",{className:"message",children:"\u0417\u0430 \u0437\u0430\u0434\u0430\u043d\u0438\u043c\u0438 \u043a\u0440\u0438\u0442\u0435\u0440\u0456\u044f\u043c\u0438 \u043d\u0435\u043c\u0430\u0454 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0445 \u0434\u043d\u0456\u0432!"})}):Object(b.jsx)("div",{children:"loading..."})})),W=Object(i.a)((()=>{const{selectedDay:e}=m(),{type:t,day:r}=Object(c.D)(e)||{},s=S(r),a=(i=r)&&Object(R.a)(new Date(i),"d MMMM",{locale:M.a});var i;return e&&Object(b.jsxs)("div",{className:"head",children:[Object(b.jsx)("div",{className:D()("icon",{[t]:!0})}),Object(b.jsxs)("div",{className:"current-date",children:[Object(b.jsx)("p",{children:s}),Object(b.jsx)("span",{children:a})]})]})})),A=()=>Object(b.jsxs)("main",{children:[Object(b.jsx)(q,{}),Object(b.jsx)(W,{}),Object(b.jsx)(x,{}),Object(b.jsx)(Q,{})]});r(235);Object(c.j)({enforceActions:"always",computedRequiresReaction:!0,observableRequiresReaction:!0,reactionRequiresObservable:!0}),Object(s.render)(Object(b.jsx)(o,{children:Object(b.jsx)(a.QueryClientProvider,{client:j,children:Object(b.jsx)(A,{})})}),document.getElementById("root"),(()=>{console.log("%c \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043e ","background: #00ff00; color: #000000; padding: 2.5px;")}))}},[[236,1,2]]]);
//# sourceMappingURL=main.b370ba0e.chunk.js.map